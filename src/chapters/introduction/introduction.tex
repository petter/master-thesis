%! Author = Petter
%! Date = 9/22/2020

\chapter{Introduction}\label{ch:introduction}

%In this thesis we will be looking at the language mechanism Package Templates and the language TypeScript and how this language mechanism fits into TypeScript.

Package Templates is a language mechanism created at the University of Oslo, at the Department for Informatics.
The language mechanism is a mechanism for re-use and adaptation, where you are able to define collections of classes, interfaces and enums.
These collections can then be instantiated at a later time, in a different context, where we can tailor the collections' content to fit its use.
Package Templates was first proposed by Krogdahl in 2001~\cite{krogdahl:GP}, and was at the time called Generic Packages.
Since then further proposals have been made to the language mechanism, and it is now known as Package Templates, or PT for short.

TypeScript is a superset of JavaScript, the programming language of the web.
It extends JavaScript with the addition of static type definitions.
These type definitions are used for type-checking the program at compilation, as well as serving as documentation for the program~\cite{tswebsite}.

This thesis will explore how Package Templates can be implemented in TypeScript.
Here we will discuss the different approaches that can be taken when working with a project such as this, and how such an implementation can be carried out.

The purpose of implementing PT in TypeScript is to look at how this language mechanism would it into a language like TypeScript.
Most interesting is probably TypeScript's structural type system, and how this mechanism will work in this context, where other implementations in statically typed languages so far have only been conducted in nominally typed languages.
It will also be interesting to see how PT can be used in the context of the web, with its vast variety of frameworks and libraries.

\section{Research Questions}\label{sec:research-questions}

As we briefly touched upon in the introduction, an implementation of Package Templates in a language like TypeScript gives rise to some interesting research questions:

\begin{itemize}
    \item \textbf{RQ1}: How does the language mechanism Package Templates fit into TypeScript?
    \item \textbf{RQ2}: Does structural typing change how the core of Package Templates works?
    \item \textbf{RQ3}: Will having PT in a structurally typed language have any notable advantages or disadvantages over having it in a nominally typed language?
\end{itemize}

\section{Contributions}\label{sec:contributions}

This thesis' main contribution is the PTS compiler.
It is easily accessible through the Node Package Manager, henceforth referred to as \emph{npm}.
This makes it easy to try out the PTS language, but more importantly the PT language mechanism.
Having easy access to a language with PT might make adoption of the language mechanism greater, and spark new research within the field.

By making the parser for the language separate from the compiler this also contributes to making creations of tools for the language more accessible.
While we have in this project used the parser solely for producing a parse tree for our compiler, this parser could also be used to make other tooling, such as syntax highlighting or a language server.

The final contribution this thesis makes is conveying how to approach related projects.
We show in this thesis how someone can approach extending a language by utilizing the grammar extending capabilities of the general-purpose parser generator, Tree-sitter, and how Tree-sitter can be used as the parser for a compiler.

\section{Chapter Overview}\label{sec:chapter-overview}

% TODO fyll inn

\textbf{Chapter 2} will give the reader an introduction to the Package Templates language mechanism and the programming language TypeScript.
We will also look into TypeScript's underlying language JavaScript, and its ecosystem.

\textbf{Chapter 3} will present the programming language PTS, which is a superset of TypeScript with the addition of Package Templates.
Here we will look at the grammar of the language as well as an example program.

\textbf{Chapter 4} is focused around the planning phase of the project.
This includes a discussion about whether we will need to go for TypeScript as our host language, or if we could opt for the simpler underlying language, JavaScript.
We will look at the requirements for our project and look at the different approaches we could use to implement PTS, as well as making a decision for which approach is the most beneficial for our project.

\textbf{Chapter 5} is all about the implementation of our compiler for the PTS programming language.
Here we will look at the methodology used during the implementation phase, as well as going into detail about how the compiler was implemented.
As the compiler is not fully implemented we will also talk about what remains to be implemented, and how this could be implemented to complete the implementation.
% TODO kanskje noe om limitations?

\textbf{Chapter 6} presents how our compiler for the PTS programming language can be installed and used.
We will present the two main ways of installing the compiler, either as a project dependency or a global installation.
With an understanding of how to get the compiler up and running we will look at a real world example of how PTS can be used.

\textbf{Chapter 7} is the first chapter of the results part of the thesis.
Here we will discuss and evaluate the PTS programming language, checking whether it is a "true" implementation of PT, and how PT is affected by a structurally typed language.

\textbf{Chapter 8} concludes this thesis.
Here we will revisit the research questions we introduced previously, and answer them with the knowledge we have gained in the span of this work.
We will conclude the chapter, and the thesis, by looking at what could have been done better in retrospect, and some proposals for future works within this field.

\section{Project Source Code}\label{sec:project-source-code}

The source code for the implementation of the PTS language is split up into two GitHub repositories, one for the parser of the project, and one for the compiler.
The parser's source code can be found at \url{https://github.com/petter/tree-sitter-pts}.
Source code for the compiler can be found at \url{https://github.com/petter/pts-lang}.
